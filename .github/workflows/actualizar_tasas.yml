name: Actualizar Tasas Automatico

on:
  schedule:
    # Se ejecuta todos los DOMINGOS a las 4:00 PM hora Venezuela (20:00 UTC)
    - cron: '0 20 * * 0'
  workflow_dispatch: # Permite que tú lo actives manualmente cuando quieras probar

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del repositorio
        uses: actions/checkout@v3

      - name: Actualizar precios.txt
        run: |
          # Aquí ponemos los montos: 282.60 para BCV y 331.19 para EURO
          echo "282.60,331.19" > precios.txt

      - name: Commit y Push de los cambios
        run: |
          git config --global user.name 'GitHub Actions'
          git config --global user.email 'actions@github.com'
          git add precios.txt
          
          # Esta línea revisa si hay cambios reales antes de intentar subir nada
          # Si no hay cambios, no hace nada y no da error.
          if git diff --staged --quiet; then
            echo "No hay cambios para guardar."
          else
            git commit -m "Actualizacion automatica de montos (Domingo 4PM)"
            git push
          fi
